// Code generated by gtrace. DO NOT EDIT.

package trace

import (
	"context"
)

// Compose returns a new Scripting which has functional fields composed
// both from t and x.
func (t Scripting) Compose(x Scripting) (ret Scripting) {
	switch {
	case t.OnExecute == nil:
		ret.OnExecute = x.OnExecute
	case x.OnExecute == nil:
		ret.OnExecute = t.OnExecute
	default:
		h1 := t.OnExecute
		h2 := x.OnExecute
		ret.OnExecute = func(e ExecuteStartInfo) func(ExecuteDoneInfo) {
			r1 := h1(e)
			r2 := h2(e)
			switch {
			case r1 == nil:
				return r2
			case r2 == nil:
				return r1
			default:
				return func(e ExecuteDoneInfo) {
					r1(e)
					r2(e)
				}
			}
		}
	}
	switch {
	case t.OnStreamExecute == nil:
		ret.OnStreamExecute = x.OnStreamExecute
	case x.OnStreamExecute == nil:
		ret.OnStreamExecute = t.OnStreamExecute
	default:
		h1 := t.OnStreamExecute
		h2 := x.OnStreamExecute
		ret.OnStreamExecute = func(s StreamExecuteStartInfo) func(StreamExecuteIntermediateInfo) func(StreamExecuteDoneInfo) {
			r1 := h1(s)
			r2 := h2(s)
			switch {
			case r1 == nil:
				return r2
			case r2 == nil:
				return r1
			default:
				return func(s StreamExecuteIntermediateInfo) func(StreamExecuteDoneInfo) {
					r11 := r1(s)
					r21 := r2(s)
					switch {
					case r11 == nil:
						return r21
					case r21 == nil:
						return r11
					default:
						return func(s StreamExecuteDoneInfo) {
							r11(s)
							r21(s)
						}
					}
				}
			}
		}
	}
	switch {
	case t.OnExplain == nil:
		ret.OnExplain = x.OnExplain
	case x.OnExplain == nil:
		ret.OnExplain = t.OnExplain
	default:
		h1 := t.OnExplain
		h2 := x.OnExplain
		ret.OnExplain = func(info ExplainQueryStartInfo) func(ExplainQueryDoneInfo) {
			r1 := h1(info)
			r2 := h2(info)
			switch {
			case r1 == nil:
				return r2
			case r2 == nil:
				return r1
			default:
				return func(doneInfo ExplainQueryDoneInfo) {
					r1(doneInfo)
					r2(doneInfo)
				}
			}
		}
	}
	return ret
}
func (t Scripting) onExecute(e ExecuteStartInfo) func(ExecuteDoneInfo) {
	fn := t.OnExecute
	if fn == nil {
		return func(ExecuteDoneInfo) {
			return
		}
	}
	res := fn(e)
	if res == nil {
		return func(ExecuteDoneInfo) {
			return
		}
	}
	return res
}
func (t Scripting) onStreamExecute(s StreamExecuteStartInfo) func(StreamExecuteIntermediateInfo) func(StreamExecuteDoneInfo) {
	fn := t.OnStreamExecute
	if fn == nil {
		return func(StreamExecuteIntermediateInfo) func(StreamExecuteDoneInfo) {
			return func(StreamExecuteDoneInfo) {
				return
			}
		}
	}
	res := fn(s)
	if res == nil {
		return func(StreamExecuteIntermediateInfo) func(StreamExecuteDoneInfo) {
			return func(StreamExecuteDoneInfo) {
				return
			}
		}
	}
	return func(s StreamExecuteIntermediateInfo) func(StreamExecuteDoneInfo) {
		res := res(s)
		if res == nil {
			return func(StreamExecuteDoneInfo) {
				return
			}
		}
		return res
	}
}
func (t Scripting) onExplain(info ExplainQueryStartInfo) func(doneInfo ExplainQueryDoneInfo) {
	fn := t.OnExplain
	if fn == nil {
		return func(ExplainQueryDoneInfo) {
			return
		}
	}
	res := fn(info)
	if res == nil {
		return func(ExplainQueryDoneInfo) {
			return
		}
	}
	return res
}
func ScriptingOnExecute(t Scripting, c *context.Context, query string, parameters queryParameters) func(result result, _ error) {
	var p ExecuteStartInfo
	p.Context = c
	p.Query = query
	p.Parameters = parameters
	res := t.onExecute(p)
	return func(result result, e error) {
		var p ExecuteDoneInfo
		p.Result = result
		p.Error = e
		res(p)
	}
}
func ScriptingOnStreamExecute(t Scripting, c *context.Context, query string, parameters queryParameters) func(error) func(error) {
	var p StreamExecuteStartInfo
	p.Context = c
	p.Query = query
	p.Parameters = parameters
	res := t.onStreamExecute(p)
	return func(e error) func(error) {
		var p StreamExecuteIntermediateInfo
		p.Error = e
		res := res(p)
		return func(e error) {
			var p StreamExecuteDoneInfo
			p.Error = e
			res(p)
		}
	}
}
func ScriptingOnExplain(t Scripting, c *context.Context, session sessionInfo, query string) func(aST string, plan string, _ error) {
	var p ExplainQueryStartInfo
	p.Context = c
	p.Session = session
	p.Query = query
	res := t.onExplain(p)
	return func(aST string, plan string, e error) {
		var p ExplainQueryDoneInfo
		p.AST = aST
		p.Plan = plan
		p.Error = e
		res(p)
	}
}
